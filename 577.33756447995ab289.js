"use strict";(self.webpackChunkangular_pwa_demo=self.webpackChunkangular_pwa_demo||[]).push([[577],{6577:(te,F,m)=>{m.r(F),m.d(F,{UserModule:()=>Z});var k=m(8132),f=m(2200),E=m(1740),b=m(467),e=m(3664),l=m(4341),a=m(8728),g=m(5558),u=m(6648);const v={production:!1,baseApiUrl:"https://192.168.100.3:7000"};var x=m(9330);let C=(()=>{class r{http;apiUrl=v.baseApiUrl+"/api/Users";constructor(t){this.http=t}getUsers(){return this.http.get(this.apiUrl).pipe((0,g.n)(t=>(0,u.H)([t.map(n=>this.mapUserResponse(n))])))}getUserById(t){return this.http.get(`${this.apiUrl}/${t}`).pipe((0,g.n)(n=>(0,u.H)([this.mapUserResponse(n)])))}createUser(t){const n=this.createFormData(t);return this.http.post(this.apiUrl,n).pipe((0,g.n)(o=>(0,u.H)([this.mapUserResponse(o)])))}updateUser(t,n){return this.http.put(`${this.apiUrl}/${t}`,{name:n.name,email:n.email,age:n.age,phone:n.phone,city:n.city}).pipe((0,g.n)(i=>(0,u.H)([this.mapUserResponse(i)])))}updateUserPhoto(t,n){const o=new FormData,i=this.dataURLtoFile(n,"photo.png");return o.append("PhotoFile",i),this.http.put(`${this.apiUrl}/${t}/photo`,o).pipe((0,g.n)(c=>(0,u.H)([this.mapUserResponse(c)])))}deleteUser(t){return this.http.delete(`${this.apiUrl}/${t}`)}mapUserResponse(t){return{id:t.id,name:t.name,email:t.email,age:t.age,phone:t.phone,city:t.city,photo:t.photoUrl}}createFormData(t){const n=new FormData;if(n.append("Name",t.name),n.append("Email",t.email),n.append("Age",t.age.toString()),n.append("Phone",t.phone),n.append("City",t.city),t.photo&&t.photo.startsWith("data:image")){const o=this.dataURLtoFile(t.photo,"photo.png");n.append("PhotoFile",o)}return n}dataURLtoFile(t,n){const o=t.split(","),i=o[0].match(/:(.*?);/)?.[1]||"image/png",c=atob(o[1]);let d=c.length;const p=new Uint8Array(d);for(;d--;)p[d]=c.charCodeAt(d);return new File([p],n,{type:i})}urlToDataURL(t){return(0,b.A)(function*(){try{console.log("Convirtiendo URL a Data URL:",t);const n=yield fetch(t);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const o=yield n.blob();return new Promise((i,c)=>{const d=new FileReader;d.onloadend=()=>{console.log("URL convertida exitosamente a Data URL"),i(d.result)},d.onerror=p=>{console.error("Error en FileReader:",p),c(p)},d.readAsDataURL(o)})}catch(n){return console.error("Error al convertir URL a Data URL:",n),""}})()}getUserByIdWithPhoto(t){return console.log("Obteniendo usuario con foto, ID:",t),this.http.get(`${this.apiUrl}/${t}`).pipe((0,g.n)(n=>{const o=this.mapUserResponse(n);return console.log("Usuario obtenido:",o),o.photo&&o.photo.startsWith("/")?(console.log("Convirtiendo foto del usuario:",o.photo),(0,u.H)(this.urlToDataURL(v.baseApiUrl+o.photo)).pipe((0,g.n)(c=>(console.log("Usuario con foto convertida:",{...o,photo:c}),(0,u.H)([{...o,photo:c}]))))):(console.log("Usuario sin foto o foto ya es Data URL:",o),(0,u.H)([o]))}))}static \u0275fac=function(n){return new(n||r)(a.KVO(x.Qq))};static \u0275prov=a.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();const j=["video"],y=["canvas"];function O(r,s){1&r&&(e.j41(0,"div",31),e.EFF(1," El nombre es requerido "),e.k0s())}function P(r,s){1&r&&(e.j41(0,"span"),e.EFF(1,"El email es requerido"),e.k0s())}function R(r,s){1&r&&(e.j41(0,"span"),e.EFF(1,"Ingresa un email v\xe1lido"),e.k0s())}function D(r,s){if(1&r&&(e.j41(0,"div",31),e.DNE(1,P,2,0,"span",30)(2,R,2,0,"span",30),e.k0s()),2&r){let t,n;const o=e.XpG();e.R7$(),e.Y8G("ngIf",null==(t=o.userForm.get("email"))||null==t.errors?null:t.errors.required),e.R7$(),e.Y8G("ngIf",null==(n=o.userForm.get("email"))||null==n.errors?null:n.errors.email)}}function M(r,s){1&r&&(e.j41(0,"span"),e.EFF(1,"La edad es requerida"),e.k0s())}function I(r,s){1&r&&(e.j41(0,"span"),e.EFF(1,"La edad debe ser mayor a 0"),e.k0s())}function G(r,s){1&r&&(e.j41(0,"span"),e.EFF(1,"La edad debe ser menor a 120"),e.k0s())}function w(r,s){if(1&r&&(e.j41(0,"div",31),e.DNE(1,M,2,0,"span",30)(2,I,2,0,"span",30)(3,G,2,0,"span",30),e.k0s()),2&r){let t,n,o;const i=e.XpG();e.R7$(),e.Y8G("ngIf",null==(t=i.userForm.get("age"))||null==t.errors?null:t.errors.required),e.R7$(),e.Y8G("ngIf",null==(n=i.userForm.get("age"))||null==n.errors?null:n.errors.min),e.R7$(),e.Y8G("ngIf",null==(o=i.userForm.get("age"))||null==o.errors?null:o.errors.max)}}function T(r,s){1&r&&(e.j41(0,"div",31),e.EFF(1," El tel\xe9fono es requerido "),e.k0s())}function $(r,s){1&r&&(e.j41(0,"div",31),e.EFF(1," La ciudad es requerida "),e.k0s())}function N(r,s){if(1&r){const t=e.RV6();e.j41(0,"div"),e.nrm(1,"img",32),e.j41(2,"button",33),e.bIt("click",function(){a.eBV(t);const o=e.XpG();return a.Njj(o.removePhoto())}),e.EFF(3,"Eliminar foto"),e.k0s()()}if(2&r){const t=e.XpG();e.R7$(),e.Y8G("src",t.photoDataUrl,e.B4B)}}function S(r,s){if(1&r){const t=e.RV6();e.j41(0,"button",34),e.bIt("click",function(){a.eBV(t);const o=e.XpG();return a.Njj(o.openCamera())}),e.EFF(1,"Tomar foto"),e.k0s()}}function L(r,s){if(1&r&&(e.j41(0,"option",41),e.EFF(1),e.k0s()),2&r){const t=s.$implicit,n=e.XpG(3);e.Y8G("value",t.deviceId),e.R7$(),e.JRh(t.label||"C\xe1mara "+(n.availableDevices.indexOf(t)+1))}}function V(r,s){if(1&r){const t=e.RV6();e.j41(0,"label"),e.EFF(1," C\xe1mara: "),e.j41(2,"select",39),e.bIt("change",function(o){a.eBV(t);const i=e.XpG(2);return a.Njj(i.onDeviceChange(o))}),e.DNE(3,L,2,2,"option",40),e.k0s()()}if(2&r){const t=e.XpG(2);e.R7$(2),e.Y8G("value",t.selectedDeviceId),e.R7$(),e.Y8G("ngForOf",t.availableDevices)}}function B(r,s){if(1&r){const t=e.RV6();e.j41(0,"div",35)(1,"div",36),e.DNE(2,V,4,2,"label",30),e.j41(3,"button",28),e.bIt("click",function(){a.eBV(t);const o=e.XpG();return a.Njj(o.stopCamera())}),e.EFF(4,"Cancelar"),e.k0s()(),e.nrm(5,"video",37,1),e.j41(7,"button",34),e.bIt("click",function(){a.eBV(t);const o=e.XpG();return a.Njj(o.capturePhoto())}),e.EFF(8,"Capturar foto"),e.k0s(),e.nrm(9,"canvas",38,2),e.k0s()}if(2&r){const t=e.XpG();e.R7$(2),e.Y8G("ngIf",t.availableDevices.length>1)}}function Y(r,s){1&r&&(e.j41(0,"span"),e.EFF(1,"Guardando..."),e.k0s())}function X(r,s){if(1&r&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&r){const t=e.XpG();e.R7$(),e.JRh(t.isEditing?"Actualizar":"Crear")}}let h=(()=>{class r{fb;userService;user=null;isVisible=!1;save=new e.bkB;close=new e.bkB;videoRef;canvasRef;userForm;isEditing=!1;isSubmitting=!1;isCameraOpen=!1;photoDataUrl=null;availableDevices=[];selectedDeviceId=null;stream=null;constructor(t,n){this.fb=t,this.userService=n}ngOnInit(){this.initForm(),this.getAvailableCameras()}ngOnChanges(t){t.user&&(console.log("Usuario recibido en formulario:",this.user),this.user?(this.isEditing=!0,setTimeout(()=>{this.userForm&&this.user&&(this.userForm.patchValue(this.user),this.photoDataUrl=this.user.photo||null,console.log("Foto asignada al formulario:",this.photoDataUrl))})):(this.isEditing=!1,this.userForm&&this.userForm.reset(),this.photoDataUrl=null))}initForm(){this.userForm=this.fb.group({name:["",[l.k0.required,l.k0.minLength(2)]],email:["",[l.k0.required,l.k0.email]],age:["",[l.k0.required,l.k0.min(1),l.k0.max(120)]],phone:["",[l.k0.required,l.k0.minLength(10)]],city:["",[l.k0.required,l.k0.minLength(2)]],photo:[""]})}getAvailableCameras(){var t=this;return(0,b.A)(function*(){if(!navigator.mediaDevices?.enumerateDevices)return;const n=yield navigator.mediaDevices.enumerateDevices();t.availableDevices=n.filter(o=>"videoinput"===o.kind),t.availableDevices.length>0&&(t.selectedDeviceId=t.availableDevices[0].deviceId)})()}openCamera(){var t=this;return(0,b.A)(function*(){if(navigator.mediaDevices?.getUserMedia)try{t.isCameraOpen=!0,t.photoDataUrl=null,t.stream&&t.stopCamera(),t.stream=yield navigator.mediaDevices.getUserMedia({video:{deviceId:t.selectedDeviceId?{exact:t.selectedDeviceId}:void 0}}),t.videoRef&&t.videoRef.nativeElement&&(t.videoRef.nativeElement.srcObject=t.stream,t.videoRef.nativeElement.play())}catch{alert("No se pudo acceder a la c\xe1mara."),t.isCameraOpen=!1}})()}capturePhoto(){if(!this.videoRef||!this.canvasRef)return;const t=this.videoRef.nativeElement,n=this.canvasRef.nativeElement;n.width=t.videoWidth,n.height=t.videoHeight;const o=n.getContext("2d");o&&(o.drawImage(t,0,0,n.width,n.height),this.photoDataUrl=n.toDataURL("image/png"),this.userForm.patchValue({photo:this.photoDataUrl})),this.stopCamera()}stopCamera(){this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null),this.isCameraOpen=!1}onDeviceChange(t){this.selectedDeviceId=t.target.value,this.isCameraOpen&&this.openCamera()}removePhoto(){this.photoDataUrl=null,this.userForm.patchValue({photo:""})}onSubmit(){if(this.userForm.valid){this.isSubmitting=!0;const t={id:this.user?.id||void 0,...this.userForm.value,photo:this.photoDataUrl||""};this.isEditing&&t.id?this.userService.updateUser(t.id,t).subscribe({next:n=>{this.photoDataUrl&&this.photoDataUrl.startsWith("data:image")?this.userService.updateUserPhoto(t.id,this.photoDataUrl).subscribe({next:o=>{this.save.emit(o),this.isSubmitting=!1,this.closeForm()},error:o=>{alert(o?.error||"Error al actualizar la foto del usuario"),this.save.emit(n),this.isSubmitting=!1,this.closeForm()}}):(this.save.emit(n),this.isSubmitting=!1,this.closeForm())},error:n=>{alert(n?.error||"Error al actualizar el usuario"),this.isSubmitting=!1}}):this.userService.createUser(t).subscribe({next:n=>{this.save.emit(n),this.isSubmitting=!1,this.closeForm()},error:n=>{alert(n?.error||"Error al crear el usuario"),this.isSubmitting=!1}})}else this.markFormGroupTouched()}closeForm(){this.close.emit(),this.userForm.reset(),this.isEditing=!1,this.isSubmitting=!1,this.photoDataUrl=null,this.stopCamera()}markFormGroupTouched(){Object.keys(this.userForm.controls).forEach(t=>{this.userForm.get(t)?.markAsTouched()})}generateId(){return Math.floor(1e4*Math.random())+1}static \u0275fac=function(n){return new(n||r)(e.rXU(l.ok),e.rXU(C))};static \u0275cmp=e.VBU({type:r,selectors:[["app-user-form"]],viewQuery:function(n,o){if(1&n&&(e.GBs(j,5),e.GBs(y,5)),2&n){let i;e.mGM(i=e.lsd())&&(o.videoRef=i.first),e.mGM(i=e.lsd())&&(o.canvasRef=i.first)}},inputs:{user:"user",isVisible:"isVisible"},outputs:{save:"save",close:"close"},features:[e.OA$],decls:48,vars:13,consts:[["noPhoto",""],["video",""],["canvas",""],[1,"modal-form-container"],[1,"modal-form-content"],[1,"modal-form-header"],[1,"modal-form-title"],[1,"btn","btn-secondary",3,"click"],[1,"modal-form-body"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","name",1,"form-label"],["type","text","id","name","formControlName","name","placeholder","Ingresa el nombre completo",1,"form-input"],["class","error-message",4,"ngIf"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email","placeholder","ejemplo@email.com",1,"form-input"],[1,"form-row"],["for","age",1,"form-label"],["type","number","id","age","formControlName","age","placeholder","25","min","1","max","120",1,"form-input"],["for","phone",1,"form-label"],["type","tel","id","phone","formControlName","phone","placeholder","+34 123 456 789",1,"form-input"],["for","city",1,"form-label"],["type","text","id","city","formControlName","city","placeholder","Madrid",1,"form-input"],[1,"photo-section"],[1,"form-label"],[4,"ngIf","ngIfElse"],["class","camera-modal",4,"ngIf"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],[4,"ngIf"],[1,"error-message"],["alt","Foto de usuario",1,"photo-preview",3,"src"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"camera-modal"],[1,"camera-controls"],["autoplay","","playsinline",""],[2,"display","none"],[3,"change","value"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(n,o){if(1&n){const i=e.RV6();e.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"h2",6),e.EFF(4),e.k0s(),e.j41(5,"button",7),e.bIt("click",function(){return a.eBV(i),a.Njj(o.closeForm())}),e.EFF(6,"\u2715"),e.k0s()(),e.j41(7,"div",8)(8,"form",9),e.bIt("ngSubmit",function(){return a.eBV(i),a.Njj(o.onSubmit())}),e.j41(9,"div",10)(10,"label",11),e.EFF(11,"Nombre completo *"),e.k0s(),e.nrm(12,"input",12),e.DNE(13,O,2,0,"div",13),e.k0s(),e.j41(14,"div",10)(15,"label",14),e.EFF(16,"Email *"),e.k0s(),e.nrm(17,"input",15),e.DNE(18,D,3,2,"div",13),e.k0s(),e.j41(19,"div",16)(20,"div",10)(21,"label",17),e.EFF(22,"Edad *"),e.k0s(),e.nrm(23,"input",18),e.DNE(24,w,4,3,"div",13),e.k0s(),e.j41(25,"div",10)(26,"label",19),e.EFF(27,"Tel\xe9fono *"),e.k0s(),e.nrm(28,"input",20),e.DNE(29,T,2,0,"div",13),e.k0s()(),e.j41(30,"div",10)(31,"label",21),e.EFF(32,"Ciudad *"),e.k0s(),e.nrm(33,"input",22),e.DNE(34,$,2,0,"div",13),e.k0s(),e.j41(35,"div",23)(36,"label",24),e.EFF(37,"Foto de usuario"),e.k0s(),e.DNE(38,N,4,1,"div",25)(39,S,2,0,"ng-template",null,0,e.C5r),e.k0s(),e.DNE(41,B,11,1,"div",26),e.j41(42,"div",27)(43,"button",28),e.bIt("click",function(){return a.eBV(i),a.Njj(o.closeForm())}),e.EFF(44," Cancelar "),e.k0s(),e.j41(45,"button",29),e.DNE(46,Y,2,0,"span",30)(47,X,2,1,"span",30),e.k0s()()()()()()}if(2&n){let i,c,d,p,_;const ee=e.sdS(40);e.R7$(4),e.JRh(o.isEditing?"\u270f\ufe0f Editar Usuario":"\u2795 Nuevo Usuario"),e.R7$(4),e.Y8G("formGroup",o.userForm),e.R7$(5),e.Y8G("ngIf",(null==(i=o.userForm.get("name"))?null:i.invalid)&&(null==(i=o.userForm.get("name"))?null:i.touched)),e.R7$(5),e.Y8G("ngIf",(null==(c=o.userForm.get("email"))?null:c.invalid)&&(null==(c=o.userForm.get("email"))?null:c.touched)),e.R7$(6),e.Y8G("ngIf",(null==(d=o.userForm.get("age"))?null:d.invalid)&&(null==(d=o.userForm.get("age"))?null:d.touched)),e.R7$(5),e.Y8G("ngIf",(null==(p=o.userForm.get("phone"))?null:p.invalid)&&(null==(p=o.userForm.get("phone"))?null:p.touched)),e.R7$(5),e.Y8G("ngIf",(null==(_=o.userForm.get("city"))?null:_.invalid)&&(null==(_=o.userForm.get("city"))?null:_.touched)),e.R7$(4),e.Y8G("ngIf",o.photoDataUrl)("ngIfElse",ee),e.R7$(3),e.Y8G("ngIf",o.isCameraOpen),e.R7$(4),e.Y8G("disabled",o.userForm.invalid||o.isSubmitting),e.R7$(),e.Y8G("ngIf",o.isSubmitting),e.R7$(),e.Y8G("ngIf",!o.isSubmitting)}},dependencies:[f.MD,f.Sq,f.bT,l.X1,l.qT,l.xH,l.y7,l.me,l.Q0,l.BC,l.cb,l.VZ,l.zX,l.j4,l.JD],encapsulation:2})}return r})();function A(r,s){if(1&r&&(e.j41(0,"div",20),e.EFF(1),e.k0s()),2&r){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",t.name.charAt(0).toUpperCase()," ")}}function z(r,s){if(1&r){const t=e.RV6();e.j41(0,"img",21),e.bIt("error",function(o){a.eBV(t);const i=e.XpG(3);return a.Njj(i.onImageError(o))}),e.k0s()}if(2&r){const t=e.XpG().$implicit,n=e.XpG(2);e.Y8G("src",t.photo.startsWith("data:")?t.photo:n.environment.baseApiUrl+t.photo,e.B4B)("alt",t.name)}}function H(r,s){if(1&r){const t=e.RV6();e.j41(0,"button",22),e.bIt("click",function(){a.eBV(t);const o=e.XpG().$implicit,i=e.XpG(2);return a.Njj(i.deleteUser(o.id))}),e.EFF(1," \u{1f5d1}\ufe0f Eliminar "),e.k0s()}}function q(r,s){if(1&r){const t=e.RV6();e.j41(0,"tr")(1,"td")(2,"div",12),e.DNE(3,A,2,1,"div",13)(4,z,1,2,"img",14),e.j41(5,"div")(6,"div",15),e.EFF(7),e.k0s(),e.j41(8,"div",16),e.EFF(9),e.k0s()()()(),e.j41(10,"td"),e.EFF(11),e.k0s(),e.j41(12,"td"),e.EFF(13),e.k0s(),e.j41(14,"td"),e.EFF(15),e.k0s(),e.j41(16,"td")(17,"div",17)(18,"button",18),e.bIt("click",function(){const o=a.eBV(t).$implicit,i=e.XpG(2);return a.Njj(i.editUser(o))}),e.EFF(19," \u270f\ufe0f Editar "),e.k0s(),e.DNE(20,H,2,0,"button",19),e.k0s()()()}if(2&r){const t=s.$implicit;e.R7$(3),e.Y8G("ngIf",!t.photo),e.R7$(),e.Y8G("ngIf",t.photo),e.R7$(3),e.JRh(t.name),e.R7$(2),e.JRh(t.email),e.R7$(2),e.SpI("",t.age," a\xf1os"),e.R7$(2),e.JRh(t.phone),e.R7$(2),e.JRh(t.city),e.R7$(5),e.Y8G("ngIf",void 0!==t.id)}}function J(r,s){if(1&r&&(e.j41(0,"div",7)(1,"table",8)(2,"thead",9)(3,"tr")(4,"th"),e.EFF(5,"Usuario"),e.k0s(),e.j41(6,"th"),e.EFF(7,"Edad"),e.k0s(),e.j41(8,"th"),e.EFF(9,"Tel\xe9fono"),e.k0s(),e.j41(10,"th"),e.EFF(11,"Ciudad"),e.k0s(),e.j41(12,"th"),e.EFF(13,"Acciones"),e.k0s()()(),e.j41(14,"tbody",10),e.DNE(15,q,21,8,"tr",11),e.k0s()()()),2&r){const t=e.XpG();e.R7$(15),e.Y8G("ngForOf",t.users)("ngForTrackBy",t.trackByUserId)}}function W(r,s){1&r&&(e.j41(0,"div",23)(1,"p"),e.EFF(2,"No hay usuarios registrados. \xa1Agrega el primero!"),e.k0s()())}function Q(r,s){if(1&r){const t=e.RV6();e.j41(0,"app-user-form",24),e.bIt("save",function(o){a.eBV(t);const i=e.XpG();return a.Njj(i.onSaveUser(o))})("close",function(){a.eBV(t);const o=e.XpG();return a.Njj(o.onCloseForm())}),e.k0s()}if(2&r){const t=e.XpG();e.Y8G("user",t.selectedUser)("isVisible",t.showForm)}}let U=(()=>{class r{userService;users=[];showForm=!1;selectedUser=null;environment=v;constructor(t){this.userService=t}ngOnInit(){this.userService.getUsers().subscribe({next:t=>{this.users=t},error:t=>{alert("Error al obtener los usuarios")}})}addUser(){this.selectedUser=null,this.showForm=!0}editUser(t){console.log("Editando usuario:",t),this.userService.getUserByIdWithPhoto(t.id).subscribe({next:n=>{console.log("Usuario con foto obtenido para editar:",n),this.selectedUser=n,this.showForm=!0},error:n=>{console.error("Error al obtener usuario con foto:",n),this.selectedUser={...t},this.showForm=!0}})}deleteUser(t){confirm("\xbfEst\xe1s seguro de que quieres eliminar este usuario?")&&(this.users=this.users.filter(n=>n.id!==t))}onSaveUser(t){if(this.selectedUser){const n=this.users.findIndex(o=>o.id===t.id);-1!==n&&(this.users[n]={...t,photo:t.photo})}else this.users.push(t)}onCloseForm(){this.showForm=!1,this.selectedUser=null}trackByUserId(t,n){return n.id}onImageError(t){const n=t.target;n.style.display="none";const o=n.parentElement?.querySelector(".datagrid-avatar");o&&(o.style.display="block")}static \u0275fac=function(n){return new(n||r)(e.rXU(C))};static \u0275cmp=e.VBU({type:r,selectors:[["app-user-list"]],decls:11,vars:3,consts:[["noUsers",""],[1,"list-container"],[1,"list-header"],[1,"list-title"],[1,"add-btn",3,"click"],["class","datagrid-container",4,"ngIf","ngIfElse"],[3,"user","isVisible","save","close",4,"ngIf"],[1,"datagrid-container"],[1,"datagrid-table"],[1,"datagrid-header"],[1,"datagrid-body"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"datagrid-user-info"],["class","datagrid-avatar",4,"ngIf"],["class","datagrid-user-photo",3,"src","alt","error",4,"ngIf"],[1,"datagrid-user-name"],[1,"datagrid-user-email"],[1,"datagrid-actions"],[1,"datagrid-action-btn","datagrid-edit-btn",3,"click"],["class","datagrid-action-btn datagrid-delete-btn",3,"click",4,"ngIf"],[1,"datagrid-avatar"],[1,"datagrid-user-photo",3,"error","src","alt"],[1,"datagrid-action-btn","datagrid-delete-btn",3,"click"],[1,"no-items"],[3,"save","close","user","isVisible"]],template:function(n,o){if(1&n){const i=e.RV6();e.j41(0,"div",1),e.nrm(1,"app-nav-bar"),e.j41(2,"div",2)(3,"h1",3),e.EFF(4,"\u{1f465} Lista de Usuarios"),e.k0s(),e.j41(5,"button",4),e.bIt("click",function(){return a.eBV(i),a.Njj(o.addUser())}),e.EFF(6," \u2795 Agregar Usuario "),e.k0s()(),e.DNE(7,J,16,2,"div",5)(8,W,3,0,"ng-template",null,0,e.C5r)(10,Q,1,2,"app-user-form",6),e.k0s()}if(2&n){const i=e.sdS(9);e.R7$(7),e.Y8G("ngIf",o.users.length>0)("ngIfElse",i),e.R7$(3),e.Y8G("ngIf",o.showForm)}},dependencies:[f.MD,f.Sq,f.bT,E.M,h],styles:[".list-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:2rem}.list-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;flex-wrap:wrap;gap:1rem}.list-title[_ngcontent-%COMP%]{color:#fff;font-size:2rem;font-weight:700;margin:0;text-shadow:0 2px 4px rgba(0,0,0,.3)}.add-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;padding:.75rem 1.5rem;border-radius:8px;font-weight:600;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 15px #0003}.add-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #0000004d}.no-items[_ngcontent-%COMP%]{text-align:center;color:#fff;font-size:1.1rem;margin-top:2rem}.items-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:1.5rem;margin-bottom:2rem}.item-card[_ngcontent-%COMP%]{background:#fffffff2;border-radius:12px;padding:1.5rem;box-shadow:0 8px 25px #0000001a;transition:all .3s ease;border:1px solid rgba(255,255,255,.2)}.item-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 12px 35px #00000026}.item-card-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-bottom:1rem}.item-avatar[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;background:linear-gradient(135deg,#667eea,#764ba2);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-size:1.2rem}.item-icon[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:8px;background:linear-gradient(135deg,#667eea,#764ba2);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-size:1.2rem}.item-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .25rem;color:#333;font-size:1.1rem}.item-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:.9rem}.item-details[_ngcontent-%COMP%]{margin-top:1rem}.item-detail[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:.5rem 0;border-bottom:1px solid #eee}.item-detail[_ngcontent-%COMP%]:last-child{border-bottom:none}.detail-label[_ngcontent-%COMP%]{font-weight:600;color:#555}.detail-value[_ngcontent-%COMP%]{color:#333}.price[_ngcontent-%COMP%]{font-weight:700;color:#28a745;font-size:1.1rem}.item-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-top:1rem}.action-btn[_ngcontent-%COMP%]{flex:1;padding:.5rem;border:none;border-radius:6px;cursor:pointer;font-weight:500;transition:all .3s ease}.edit-btn[_ngcontent-%COMP%]{background:#007bff;color:#fff}.edit-btn[_ngcontent-%COMP%]:hover{background:#0056b3}.delete-btn[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.delete-btn[_ngcontent-%COMP%]:hover{background:#c82333}.datagrid-container[_ngcontent-%COMP%]{background:#fffffff2;border-radius:12px;overflow:hidden;box-shadow:0 8px 25px #0000001a;margin-bottom:2rem}.datagrid-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:#fff}.datagrid-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.datagrid-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1rem;text-align:left;font-weight:600;font-size:.9rem;text-transform:uppercase;letter-spacing:.5px}.datagrid-body[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #eee;transition:background-color .3s ease}.datagrid-body[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.datagrid-body[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{border-bottom:none}.datagrid-body[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;vertical-align:middle;color:#333}.datagrid-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:linear-gradient(135deg,#667eea,#764ba2);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-size:1rem;margin-right:.75rem}.datagrid-user-photo[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;object-fit:cover;margin-right:.75rem;border:2px solid #667eea}.datagrid-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:8px;background:linear-gradient(135deg,#667eea,#764ba2);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-size:1rem;margin-right:.75rem}.datagrid-user-info[_ngcontent-%COMP%]{display:flex;align-items:center}.datagrid-user-name[_ngcontent-%COMP%]{font-weight:600;color:#333;margin-bottom:.25rem}.datagrid-user-email[_ngcontent-%COMP%]{font-size:.85rem;color:#666}.datagrid-product-info[_ngcontent-%COMP%]{display:flex;align-items:center}.datagrid-product-name[_ngcontent-%COMP%]{font-weight:600;color:#333;margin-bottom:.25rem}.datagrid-product-category[_ngcontent-%COMP%]{font-size:.85rem;color:#666}.datagrid-price[_ngcontent-%COMP%]{font-weight:700;color:#28a745}.datagrid-stock[_ngcontent-%COMP%]{font-weight:500;color:#666}.datagrid-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;justify-content:flex-end}.datagrid-action-btn[_ngcontent-%COMP%]{padding:.5rem .75rem;border:none;border-radius:6px;cursor:pointer;font-weight:500;transition:all .3s ease;font-size:.85rem;min-width:80px}.datagrid-edit-btn[_ngcontent-%COMP%]{background:#007bff;color:#fff}.datagrid-edit-btn[_ngcontent-%COMP%]:hover{background:#0056b3}.datagrid-delete-btn[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.datagrid-delete-btn[_ngcontent-%COMP%]:hover{background:#c82333}@media (max-width: 768px){.list-container[_ngcontent-%COMP%]{padding:1rem}.list-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.items-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.datagrid-container[_ngcontent-%COMP%]{overflow-x:auto}.datagrid-table[_ngcontent-%COMP%]{min-width:600px}.datagrid-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .datagrid-body[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem .5rem}.datagrid-actions[_ngcontent-%COMP%]{flex-direction:column;gap:.25rem}.datagrid-action-btn[_ngcontent-%COMP%]{min-width:60px;padding:.4rem .5rem;font-size:.8rem}}"]})}return r})();const K=[{path:"",component:U},{path:"new",component:h},{path:"edit/:id",component:h}];let Z=(()=>{class r{static \u0275fac=function(n){return new(n||r)};static \u0275mod=e.$C({type:r});static \u0275inj=a.G2t({imports:[k.iI.forChild(K),U,h]})}return r})()}}]);